
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="icon" href="../../images/NWISWalesNHSUK2.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-7.1.4">
    
    
      
        <title>Working with openEHR Templates - openEHR CDR API for client-side developers (DHCW)</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.bde7dde4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ef6f36e2.min.css">
        
          
          
          <meta name="theme-color" content="#546d78">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="blue-grey" data-md-color-accent="teal">
  
    
    <script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#working-with-openehr-templates" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="openEHR CDR API for client-side developers (DHCW)" class="md-header__button md-logo" aria-label="openEHR CDR API for client-side developers (DHCW)" data-md-component="logo">
      
  <img src="../../images/NWISWalesNHSUK2.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            openEHR CDR API for client-side developers (DHCW)
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Working with openEHR Templates
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="openEHR CDR API for client-side developers (DHCW)" class="md-nav__button md-logo" aria-label="openEHR CDR API for client-side developers (DHCW)" data-md-component="logo">
      
  <img src="../../images/NWISWalesNHSUK2.png" alt="logo">

    </a>
    openEHR CDR API for client-side developers (DHCW)
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Overview
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      <label class="md-nav__link" for="__nav_2">
        Introduction to openEHR
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Introduction to openEHR" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Introduction to openEHR
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../intro/INT1-overview-openehr/" class="md-nav__link">
        Overview of openEHR
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../intro/INT2-overview-rest-apis/" class="md-nav__link">
        Overview of openEHR REST APIs
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../intro/INT3-archetypes-template/" class="md-nav__link">
        openEHR archetypes and templates
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../intro/INT4-reference-model/" class="md-nav__link">
        openEHR Reference Model
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../postman/PM1-postman-getting-ready/" class="md-nav__link">
        Getting ready with Postman
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../postman/PM2-navigate-postman/" class="md-nav__link">
        Navigate Postman
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../postman/PM3-using-postman/" class="md-nav__link">
        Using Postman with Ehrscape
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      <label class="md-nav__link" for="__nav_3">
        Jamaica Passport project
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Jamaica Passport project" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Jamaica Passport project
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../passport/JPASS1-passport-project-overview/" class="md-nav__link">
        Overview of the Passport-JDP project
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../passport/JPASS2-retrieving-an-ehrid/" class="md-nav__link">
        Retrieving the patient's ehrId
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../passport/JPASS3-querying-allergies/" class="md-nav__link">
        Querying for patient allergies
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../passport/JPASS7-querying-compositions/" class="md-nav__link">
        Querying for recent compositions
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../passport/JPASS9-committing-observation-data/" class="md-nav__link">
        Committing Observation data
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../passport/JPASS10-retrieving-observation-data/" class="md-nav__link">
        Retrieving a Patient Observations Composition
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../passport/JPASS11-updating-observation-data/" class="md-nav__link">
        Updating Patient Observations data
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../passport/JPASS12-composition-constraints/" class="md-nav__link">
        Understanding composition Constraints and validation
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../passport/JPASS13-openehr-datatypes/" class="md-nav__link">
        openEHR Datatypes
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../passport/JPASS14-openehr-rm-attributes/" class="md-nav__link">
        Key openEHR RM attributes
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      <label class="md-nav__link" for="__nav_4">
        openCDR API
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="openCDR API" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          openCDR API
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../OCDR1-authentication/" class="md-nav__link">
        Getting started - Authentication
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Working with openEHR Templates
      </a>
      
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../OCDR3-committing-a-composition/" class="md-nav__link">
        Committing Observation data
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../OCDR4-retrieving-a-composition/" class="md-nav__link">
        Retrieving an openEHR Composition
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../OCDR5-creating-an-ehr/" class="md-nav__link">
        Creating a new patient 'EHR'
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../OCDR6-retrieving-an-ehrid/" class="md-nav__link">
        Retrieving the patient's ehrId
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      <label class="md-nav__link" for="__nav_5">
        Better Ehrscape API
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Better Ehrscape API" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Better Ehrscape API
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ehrscape/ECDR1-authentication/" class="md-nav__link">
        Getting started - Authentication
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ehrscape/ECDR2-openehr-templates/" class="md-nav__link">
        Working with openEHR Templates
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ehrscape/ECDR3-committing-a-composition/" class="md-nav__link">
        Committing openEHR data
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ehrscape/ECDR4-retrieving-a-composition/" class="md-nav__link">
        Retrieving an openEHR Composition
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ehrscape/ECDR5-retrieving-an-ehrId/" class="md-nav__link">
        Retrieving the patient's ehrId
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ehrscape/ECDR6-updating-a-composition/" class="md-nav__link">
        Updating an openEHR Composition
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="working-with-openehr-templates">Working with openEHR Templates</h1>
<p>openEHR templates are aggregations of logical archetype models that along with the basic Reference model, act as the validation schema for any patient data submitted to the CDR.</p>
<p>This section will test our connection the CDR by running a <code>List templates</code> call, then upload a new template to the CDR via an <code>Upload a template</code> call</p>
<h2>A. List templates</h2>
<div class="tabbed-set" data-tabs="1:3"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><label for="__tabbed_1_1">cURL</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code>    curl 
    --locations 
    --request GET <span class="s1">&#39;https://rest.ehrscape.com/rest/openehr/v1/definition/template/adl1.4&#39;</span> <span class="se">\</span>
    --header <span class="s1">&#39;Accept: application/json&#39;</span> <span class="se">\</span>
    --header <span class="s1">&#39;Prefer: return=minimal&#39;</span> <span class="se">\</span>
    --header <span class="s1">&#39;Authorization: Basic YTgxZjQ3YzYtYTc1Ny00ZTM0LWI2NDQtM2NjYzYyYjRhMDFjOiQyYSQxMCQ2MTlraQ==&#39;</span>
</code></pre></div>

</div>
<input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><label for="__tabbed_1_2">NodeJS/Axios</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="kd">var</span> <span class="nx">axios</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;axios&#39;</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">config</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">method</span><span class="o">:</span> <span class="s1">&#39;get&#39;</span><span class="p">,</span>
  <span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;https://rest.ehrscape.com/rest/openehr/v1/definition/template/adl1.4&#39;</span><span class="p">,</span>
  <span class="nx">headers</span><span class="o">:</span> <span class="p">{</span> 
    <span class="s1">&#39;Accept&#39;</span><span class="o">:</span> <span class="s1">&#39;application/json&#39;</span><span class="p">,</span> 
    <span class="s1">&#39;Prefer&#39;</span><span class="o">:</span> <span class="s1">&#39;return=minimal&#39;</span><span class="p">,</span> 
    <span class="s1">&#39;Authorization&#39;</span><span class="o">:</span> <span class="s1">&#39;Basic YTgxZjQ3YzYtYTc1Ny00ZTM0LWI2NDQtM2NjYzYyYjRhMDFjOiQyYSQxMCQ2MTlraQ==&#39;</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">axios</span><span class="p">(</span><span class="nx">config</span><span class="p">)</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">));</span>
<span class="p">})</span>
<span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>

</div>
<input id="__tabbed_1_3" name="__tabbed_1" type="radio" /><label for="__tabbed_1_3">Python/requests</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code>  <span class="kn">import</span> <span class="nn">requests</span>

  <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://rest.ehrscape.com/rest/openehr/v1/definition/template/adl1.4&quot;</span>

  <span class="n">payload</span> <span class="o">=</span> <span class="p">{}</span>
  <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;Accept&#39;</span><span class="p">:</span> <span class="s1">&#39;application/json&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Prefer&#39;</span><span class="p">:</span> <span class="s1">&#39;return=minimal&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Authorization&#39;</span><span class="p">:</span> <span class="s1">&#39;Basic YTgxZjQ3YzYtYTc1Ny00ZTM0LWI2NDQtM2NjYzYyYjRhMDFjOiQyYSQxMCQ2MTlraQ==&#39;</span>
  <span class="p">}</span>

  <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s2">&quot;GET&quot;</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">payload</span><span class="p">)</span>

  <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf8&#39;</span><span class="p">))</span>
</code></pre></div>

</div>
</div>
<h4>Response</h4>
<p>If your CDR is already provisioned with some templates, you will a 200 code and some output like this.</p>
<div class="highlight"><pre><span></span><code><span class="p">[</span>
    <span class="p">{</span>
        <span class="nt">&quot;concept&quot;</span><span class="p">:</span> <span class="s2">&quot;IDCR - Vital Signs Encounter.v1&quot;</span><span class="p">,</span>
        <span class="nt">&quot;template_id&quot;</span><span class="p">:</span> <span class="s2">&quot;IDCR - Vital Signs Encounter.v1&quot;</span><span class="p">,</span>
        <span class="nt">&quot;archetype_id&quot;</span><span class="p">:</span> <span class="s2">&quot;openEHR-EHR-COMPOSITION.encounter.v1&quot;</span><span class="p">,</span>
        <span class="nt">&quot;created_timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2020-06-26T17:03:11.518Z&quot;</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="nt">&quot;concept&quot;</span><span class="p">:</span> <span class="s2">&quot;DENWIS_Observations&quot;</span><span class="p">,</span>
        <span class="nt">&quot;template_id&quot;</span><span class="p">:</span> <span class="s2">&quot;DENWIS_Observations&quot;</span><span class="p">,</span>
        <span class="nt">&quot;archetype_id&quot;</span><span class="p">:</span> <span class="s2">&quot;openEHR-EHR-COMPOSITION.encounter.v1&quot;</span><span class="p">,</span>
        <span class="nt">&quot;created_timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2020-06-29T11:26:33.055Z&quot;</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="nt">&quot;concept&quot;</span><span class="p">:</span> <span class="s2">&quot;Suspected Covid-19 Assessment.v0.1&quot;</span><span class="p">,</span>
        <span class="nt">&quot;template_id&quot;</span><span class="p">:</span> <span class="s2">&quot;Suspected Covid-19 Assessment.v0.1&quot;</span><span class="p">,</span>
        <span class="nt">&quot;archetype_id&quot;</span><span class="p">:</span> <span class="s2">&quot;openEHR-EHR-COMPOSITION.encounter.v1&quot;</span><span class="p">,</span>
        <span class="nt">&quot;created_timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2020-07-06T14:24:33.974Z&quot;</span>
    <span class="p">}</span>
<span class="p">]</span>
</code></pre></div>

<p>otherwise you should get a 200 code and an empty array.</p>
<p>If you get some other error, this is likely to be that you have not set the baseURL correctly, or that the Authorization token is incorrect.</p>
<h2>B. Upload a new template</h2>
<p>You will find an example 'operational' template here in the templates folder. This example is for a simple data-entry dataset to allow patients to record how they are feeling, and then share this with their care team.</p>
<p>Don't worry for now about the format of the file itself. It follows the Archetype Object Model (1.4) but is always generated automatically by tools such as the openEHR Archetype Designer. </p>
<div class="tabbed-set" data-tabs="2:3"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><label for="__tabbed_2_1">cURL</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code>curl 
--location 
--request POST <span class="s1">&#39;https://rest.ehrscape.com/rest/openehr/v1/definition/template/adl1.4&#39;</span> <span class="se">\</span>
--header <span class="s1">&#39;Accept: application/xml&#39;</span> <span class="se">\</span>
--header <span class="s1">&#39;Content-Type: application/xml&#39;</span> <span class="se">\</span>
--header <span class="s1">&#39;Prefer: return=minimal&#39;</span> <span class="se">\</span>
--header <span class="s1">&#39;Authorization: Basic YTgxZjQ3YzYtYTc1Ny00ZTM0LWI2NDQtM2NjYzYyYjRhMDFjOiQyYSQxMCQ2MTlraQ==&#39;</span> <span class="se">\</span>
--data-raw <span class="s1">&#39;&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;</span>
<span class="s1">&lt;template xmlns=&quot;http://schemas.openehr.org/v1&quot;&gt;</span>
<span class="s1">    &lt;language&gt;</span>
<span class="s1">        &lt;terminology_id&gt;</span>
<span class="s1">            &lt;value&gt;ISO_639-1&lt;/value&gt;</span>
<span class="s1">        &lt;/terminology_id&gt;</span>
<span class="s1">        &lt;code_string&gt;en&lt;/code_string&gt;</span>
<span class="s1">    &lt;/language&gt;</span>
<span class="s1">    &lt;description&gt;</span>
<span class="s1">  .... // Snipped for brevity //</span>
<span class="s1">&lt;/template&gt;</span>
<span class="s1">&#39;</span>
</code></pre></div>

</div>
<input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><label for="__tabbed_2_2">NodeJS axios</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="kd">var</span> <span class="nx">axios</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;axios&#39;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="s1">&#39;&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;\n&lt;template xmlns=&quot;http://schemas.openehr.org/v1&quot;&gt;\n    &lt;language&gt;\n        &lt;terminology_id&gt;\n            &lt;value&gt;ISO_639-1&lt;/value&gt;\n        &lt;/terminology_id&gt;\n        &lt;code_string&gt;en&lt;/code_string&gt;\n    &lt;/language&gt;\n    &lt;description&gt;\n        &lt;original_author id=&quot;name&quot;&gt;Ian McNicoll&lt;/original_author&gt;\n        &lt;original_author id=&quot;organisation&quot;&gt;freshEHR Clinical Informatics Ltd.&lt;/original_author&gt;\n        &lt;original_author id=&quot;email&quot;&gt;ian@freshehr.com&lt;/original_author&gt;\n        &lt;original_author id=&quot;date&quot;&gt;2020-02-27&lt;/original_author&gt;\n        &lt;lifecycle_state&gt;release_candidate&lt;/lifecycle_state&gt;\n        &lt;other_details id=&quot;licence&gt; TRIMMED for Brevity...... &lt;/template&gt;\n&#39;</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">config</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">method</span><span class="o">:</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span>
  <span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;https://rest.ehrscape.com/rest/openehr/v1/definition/template/adl1.4&#39;</span><span class="p">,</span>
  <span class="nx">headers</span><span class="o">:</span> <span class="p">{</span> 
    <span class="s1">&#39;Accept&#39;</span><span class="o">:</span> <span class="s1">&#39;application/json&#39;</span><span class="p">,</span> 
    <span class="s1">&#39;Content-Type&#39;</span><span class="o">:</span> <span class="s1">&#39;application/xml&#39;</span><span class="p">,</span> 
    <span class="s1">&#39;PREFER&#39;</span><span class="o">:</span> <span class="s1">&#39;return=minimal&#39;</span><span class="p">,</span> 
    <span class="s1">&#39;Authorization&#39;</span><span class="o">:</span> <span class="s1">&#39;Basic YTgxZjQ3YzYtYTc1Ny00ZTM0LWI2NDQtM2NjYzYyYjRhMDFjOiQyYSQxMCQ2MTlraQ==&#39;</span>
  <span class="p">},</span>
  <span class="nx">data</span> <span class="o">:</span> <span class="nx">data</span>
<span class="p">};</span>

<span class="nx">axios</span><span class="p">(</span><span class="nx">config</span><span class="p">)</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">));</span>
<span class="p">})</span>
<span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>

</div>
<input id="__tabbed_2_3" name="__tabbed_2" type="radio" /><label for="__tabbed_2_3">Python/requests</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code>    <span class="kn">import</span> <span class="nn">requests</span>

    <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;/definition/template/adl1.4&quot;</span>

    <span class="n">payload</span> <span class="o">=</span> <span class="s2">&quot;&lt;?xml version=</span><span class="se">\&quot;</span><span class="s2">1.0</span><span class="se">\&quot;</span><span class="s2"> encoding=</span><span class="se">\&quot;</span><span class="s2">utf-8</span><span class="se">\&quot;</span><span class="s2">?&gt;</span><span class="se">\n</span><span class="s2">&lt;!--Operational template XML automatically generated by Ocean Template Designer Version 2.8.94Beta--&gt;</span><span class="se">\n</span><span class="s2">&lt;template xmlns:xsi=</span><span class="se">\&quot;</span><span class="s2">http://www.w3.org/2001/XMLSchema-instance</span><span class="se">\&quot;</span><span class="s2"> xmlns:xsd=</span><span class="se">\&quot;</span><span class="s2">http://www.w3.org/2001/XMLSchema</span><span class="se">\&quot;</span><span class="s2"> xmlns=</span><span class="se">\&quot;</span><span class="s2">http://schemas.openehr.org/v1</span><span class="se">\&quot;</span><span class="s2">&gt;</span><span class="se">\n</span><span class="s2">  &lt;language&gt;</span><span class="se">\n</span><span class="s2">    &lt;terminology_id&gt;</span><span class="se">\n</span><span class="s2">      &lt;value&gt;ISO_639-1&lt;/value&gt;</span><span class="se">\n</span><span class="s2">    &lt;/terminology_id&gt;</span><span class="se">\n</span><span class="s2">    &lt;code_string&gt;en&lt;/code_string&gt;</span><span class="se">\n</span><span class="s2">  &lt;/language&gt;</span><span class="se">\n</span><span class="s2">  &lt;description&gt;</span><span class="se">\n</span><span class="s2">    &lt;original_author id=</span><span class="se">\&quot;</span><span class="s2">Original Author</span><span class="se">\&quot;</span><span class="s2">&gt;Not Specified&lt;/original_author&gt;</span><span class="se">\n</span><span class="s2">    &lt;lifecycle_state&gt;Initial&lt;/lifecycle_state&gt;</span><span class="se">\n</span><span class="s2">    &lt;other_details id=</span><span class="se">\&quot;</span><span class="s2">MetaDataSet:Sample Set </span><span class="se">\&quot;</span><span class="s2">&gt;Template metadata sample set &lt;/other_details&gt;</span><span class="se">\n</span><span class="s2">    &lt;other_details id=</span><span class="se">\&quot;</span><span class="s2">Acknowledgements</span><span class="se">\&quot;</span><span class="s2">&gt;&lt;/other_details&gt;</span><span class="se">\n</span><span class="s2">    &lt;other_details id=</span><span class="se">\&quot;</span><span class="s2">Business Process Level</span><span class="se">\&quot;</span><span class="s2">&gt;&lt;/other_details&gt;</span><span class="se">\n</span><span class="s2">    &lt;other_details id=</span><span class="se">\&quot;</span><span class="s2">Care setting</span><span class="se">\&quot;</span><span class="s2">&gt;&lt;/other_details&gt;</span><span class="se">\n</span><span class="s2">    &lt;other_details id=</span><span class="se">\&quot;</span><span class="s2">Client group</span><span class="se">\&quot;</span><span class="s2">&gt;&lt;/other_details&gt;</span><span class="se">\n</span><span class="s2">    &lt;other_details id=</span><span class="se">\&quot;</span><span class="s2">Clinical Record Element</span><span class="se">\&quot;</span><span class="s2">&gt;&lt;/other_details&gt;</span><span class="se">\n</span><span class="s2">    &lt;other_details id=</span><span class="se">\&quot;</span><span class="s2">Copyright</span><span class="se">\&quot;</span><span class="s2">&gt;&lt;/other_details&gt;</span><span class="se">\n</span><span class="s2">    &lt;other_details id=</span><span class="se">\&quot;</span><span class="s2">Issues</span><span class="se">\&quot;</span><span class="s2">&gt;&lt;/other_details&gt;</span><span class="se">\n</span><span class="s2">    &lt;other_details id=</span><span class="se">\&quot;</span><span class="s2">Owner</span><span class="se">\&quot;</span><span class="s2">&gt;&lt;/other_details&gt;</span><span class="se">\n</span><span class="s2">    &lt;other_details id=</span><span class="se">\&quot;</span><span class="s2">Sign off</span><span class="se">\&quot;</span><span class="s2">&gt;&lt;/other_details&gt;</span><span class="se">\n</span><span class="s2">    &lt;other_details id=</span><span class="se">\&quot;</span><span class="s2">Speciality</span><span class="se">\&quot;</span><span class="s2">&gt;&lt;/other_details&gt;</span><span class="se">\n</span><span class="s2"> ... Snipped for brevity ... </span><span class="se">\n</span><span class="s2">&lt;/template&gt;&quot;</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
      <span class="s1">&#39;Accept&#39;</span><span class="p">:</span> <span class="s1">&#39;application/xml&#39;</span><span class="p">,</span>
      <span class="s1">&#39;Content-Type&#39;</span><span class="p">:</span> <span class="s1">&#39;application/xml&#39;</span><span class="p">,</span>
      <span class="s1">&#39;PREFER&#39;</span><span class="p">:</span> <span class="s1">&#39;return=minimal&#39;</span><span class="p">,</span>
      <span class="s1">&#39;Authorization&#39;</span><span class="p">:</span> <span class="s1">&#39;Basic YTgxZjQ3YzYtYTc1Ny00ZTM0LWI2NDQtM2NjYzYyYjRhMDFjOiQyYSQxMCQ2MTlraQ==&#39;</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s2">&quot;POST&quot;</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">payload</span><span class="p">)</span>

  <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf8&#39;</span><span class="p">))</span>
</code></pre></div>

</div>
</div>
<h4>Response</h4>
<p>Currently the response for a successful upload is a little inconsistent between CDRs.</p>
<ol>
<li>
<p>ehrBase will give a 204 no response code but the upload has been successful.</p>
</li>
<li>
<p>BetterCDR will give a 201 response code.</p>
</li>
</ol>
<h3>Overwriting an existing template</h3>
<p>The current REST specification prohibits overwriting an existing template - issuing a <code>409 conflict</code> code and while this makes sense for deployments it has proven to be over-restrictive during early development where a template may change repeatedly.</p>
<ol>
<li>
<p>BetterCDR allows templates to be over-written and simply returns a <code>201</code> code.</p>
</li>
<li>
<p>ehrBase prohibits template over-writing by default but does allow a server configuration to be set which loosens this restriction.</p>
</li>
</ol>
<h2>More on templates</h2>
<p>As well as being used to validate patient records when they are committed to the CDR, templates are used as the basis for many other types of technical artefact, such as automatic forms builders, class library generation, and for client-side validation in UI.</p>
<p>Although formally aligned with the in-memory AOM, the operational template can be hard to parse and understand, particularly if you are just trying to understand the various schema constraints.</p>
<p>For this purpose, you may find it helpful to gnerate a 'Web template' - this is a much simpler JSON format, itself based on the operational template, and which can be exported from the openEHR Archetype Designer via the Export menu.</p>
<p>Now that we have a valid template uploaded, we can <a href="../OCDR3-committing-a-composition/">Commit a Composition</a> of patient data to the CDR.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        <a href="../OCDR1-authentication/" class="md-footer__link md-footer__link--prev" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Getting started - Authentication
            </div>
          </div>
        </a>
      
      
        <a href="../OCDR3-committing-a-composition/" class="md-footer__link md-footer__link--next" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Committing Observation data
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}, "search": "../../assets/javascripts/workers/search.4fa0e4ee.min.js", "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.1d3bfcf1.min.js"></script>
      
    
  </body>
</html>