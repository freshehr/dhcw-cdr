
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="icon" href="../../images/NWISWalesNHSUK2.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-7.1.4">
    
    
      
        <title>openEHR Datatypes - openEHR CDR API for client-side developers (DHCW)</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.bde7dde4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ef6f36e2.min.css">
        
          
          
          <meta name="theme-color" content="#546d78">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="blue-grey" data-md-color-accent="teal">
  
    
    <script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#key-openehr-datatypes" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="openEHR CDR API for client-side developers (DHCW)" class="md-header__button md-logo" aria-label="openEHR CDR API for client-side developers (DHCW)" data-md-component="logo">
      
  <img src="../../images/NWISWalesNHSUK2.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            openEHR CDR API for client-side developers (DHCW)
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              openEHR Datatypes
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="openEHR CDR API for client-side developers (DHCW)" class="md-nav__button md-logo" aria-label="openEHR CDR API for client-side developers (DHCW)" data-md-component="logo">
      
  <img src="../../images/NWISWalesNHSUK2.png" alt="logo">

    </a>
    openEHR CDR API for client-side developers (DHCW)
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Overview
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      <label class="md-nav__link" for="__nav_2">
        Introduction to openEHR
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Introduction to openEHR" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Introduction to openEHR
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../intro/INT1-overview-openehr/" class="md-nav__link">
        Overview of openEHR
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../intro/INT2-overview-rest-apis/" class="md-nav__link">
        Overview of openEHR REST APIs
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../intro/INT3-archetypes-template/" class="md-nav__link">
        openEHR archetypes and templates
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../intro/INT4-reference-model/" class="md-nav__link">
        openEHR Reference Model
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../postman/PM1-postman-getting-ready/" class="md-nav__link">
        Getting ready with Postman
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../postman/PM2-navigate-postman/" class="md-nav__link">
        Navigate Postman
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../postman/PM3-using-postman/" class="md-nav__link">
        Using Postman with Ehrscape
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      <label class="md-nav__link" for="__nav_3">
        Jamaica Passport project
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Jamaica Passport project" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Jamaica Passport project
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../JPASS1-passport-project-overview/" class="md-nav__link">
        Overview of the Passport-JDP project
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../JPASS2-retrieving-an-ehrid/" class="md-nav__link">
        Retrieving the patient's ehrId
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../JPASS3-querying-allergies/" class="md-nav__link">
        Querying for patient allergies
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../JPASS7-querying-compositions/" class="md-nav__link">
        Querying for recent compositions
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../JPASS9-committing-observation-data/" class="md-nav__link">
        Committing Observation data
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../JPASS10-retrieving-observation-data/" class="md-nav__link">
        Retrieving a Patient Observations Composition
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../JPASS11-updating-observation-data/" class="md-nav__link">
        Updating Patient Observations data
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../JPASS12-composition-constraints/" class="md-nav__link">
        Understanding composition Constraints and validation
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
      <a href="./" class="md-nav__link md-nav__link--active">
        openEHR Datatypes
      </a>
      
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../JPASS14-openehr-rm-attributes/" class="md-nav__link">
        Key openEHR RM attributes
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      <label class="md-nav__link" for="__nav_4">
        openCDR API
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="openCDR API" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          openCDR API
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../opencdr/OCDR1-authentication/" class="md-nav__link">
        Getting started - Authentication
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../opencdr/OCDR2-openehr-templates/" class="md-nav__link">
        Working with openEHR Templates
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../opencdr/OCDR3-committing-a-composition/" class="md-nav__link">
        Committing Observation data
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../opencdr/OCDR4-retrieving-a-composition/" class="md-nav__link">
        Retrieving an openEHR Composition
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../opencdr/OCDR5-creating-an-ehr/" class="md-nav__link">
        Creating a new patient 'EHR'
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../opencdr/OCDR6-retrieving-an-ehrid/" class="md-nav__link">
        Retrieving the patient's ehrId
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      <label class="md-nav__link" for="__nav_5">
        Better Ehrscape API
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Better Ehrscape API" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Better Ehrscape API
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ehrscape/ECDR1-authentication/" class="md-nav__link">
        Getting started - Authentication
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ehrscape/ECDR2-openehr-templates/" class="md-nav__link">
        Working with openEHR Templates
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ehrscape/ECDR3-committing-a-composition/" class="md-nav__link">
        Committing openEHR data
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ehrscape/ECDR4-retrieving-a-composition/" class="md-nav__link">
        Retrieving an openEHR Composition
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ehrscape/ECDR5-retrieving-an-ehrId/" class="md-nav__link">
        Retrieving the patient's ehrId
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ehrscape/ECDR6-updating-a-composition/" class="md-nav__link">
        Updating an openEHR Composition
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                <p><img alt="" src="../../images/construction.jpg" /></p>
<h1 id="key-openehr-datatypes">Key openEHR datatypes</h1>
<p>The openEHR Reference model defines a relatively small set of information model constructs which openEHR back-ends must support. This includes a number of generic classes and datatypes.</p>
<p>The Reference model contains virtually no clinical content e.g concepts for Medication, or Diagnosis. These are defined and managed separately as <code>archetypes</code>.</p>
<p>openEHR has a very rich set of allowable datatypes. A full definition is beyond the scope of this document but developers new to this field may find the following notes helpful. You can refer to the  <a href="https://specifications.openehr.org/releases/RM/latest/data_types.html">openEHR Specification</a>  and <a href="">UML</a> for full details.</p>
<p>The formal Class names for all datatypes in openEHR start with <code>DV_</code></p>
<h2>Datatype: <strong>text</strong> (<code>DV_TEXT</code>)</h2>
<p>Allows the recording of simple, unformatted text. Newlines and carriage returns are allowed.
openEHR does not normally constrain the length of string.</p>
<p>The example shows how a multiple occurrence Element is handled.</p>
<div class="tabbed-set" data-tabs="1:4"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><label for="__tabbed_1_1">RM Specs</label><div class="tabbed-content">
<p>The <a href="https://specifications.openehr.org/releases/RM/latest/data_types.html#_text_package">rm.data_types.text package</a> contains classes for representing all textual values in the health record, including plain text, coded terms, and narrative text.
<img alt="UML - openEHR RM-datatypes.text package" src="https://specifications.openehr.org/releases/UML/latest/diagrams/diagram_Diagrams___18_1_83e026d_1433773264006_931575_5971.svg" /></p>
</div>
<input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><label for="__tabbed_1_2">CANONICAL JSON</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code>   <span class="p">{</span>
    <span class="err">{</span>
                        <span class="nt">&quot;items&quot;</span><span class="p">:</span> <span class="p">[</span>
                            <span class="p">{</span>
                                <span class="nt">&quot;_type&quot;</span><span class="p">:</span> <span class="s2">&quot;ELEMENT&quot;</span><span class="p">,</span>
                                <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="p">{</span>
                                    <span class="nt">&quot;_type&quot;</span><span class="p">:</span> <span class="s2">&quot;DV_TEXT&quot;</span><span class="p">,</span>
                                    <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;What matters to me&quot;</span>
                                <span class="p">},</span>
                                <span class="nt">&quot;archetype_node_id&quot;</span><span class="p">:</span> <span class="s2">&quot;at0004&quot;</span><span class="p">,</span>
                                <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="p">{</span>
                                    <span class="nt">&quot;_type&quot;</span><span class="p">:</span> <span class="s2">&quot;DV_TEXT&quot;</span><span class="p">,</span>
                                    <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;Parents&quot;</span>
                                <span class="p">}</span>
                            <span class="p">},</span>
                            <span class="p">{</span>
                                <span class="nt">&quot;_type&quot;</span><span class="p">:</span> <span class="s2">&quot;ELEMENT&quot;</span><span class="p">,</span>
                                <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="p">{</span>
                                    <span class="nt">&quot;_type&quot;</span><span class="p">:</span> <span class="s2">&quot;DV_TEXT&quot;</span><span class="p">,</span>
                                    <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;What matters to me #2&quot;</span>
                                <span class="p">},</span>
                                <span class="nt">&quot;archetype_node_id&quot;</span><span class="p">:</span> <span class="s2">&quot;at0004&quot;</span><span class="p">,</span>
                                <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="p">{</span>
                                    <span class="nt">&quot;_type&quot;</span><span class="p">:</span> <span class="s2">&quot;DV_TEXT&quot;</span><span class="p">,</span>
                                    <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;Mood&quot;</span>
                                <span class="p">}</span>
                            <span class="p">},</span>
                            <span class="p">{</span>
                                <span class="nt">&quot;_type&quot;</span><span class="p">:</span> <span class="s2">&quot;ELEMENT&quot;</span><span class="p">,</span>
                                <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="p">{</span>
                                    <span class="nt">&quot;_type&quot;</span><span class="p">:</span> <span class="s2">&quot;DV_TEXT&quot;</span><span class="p">,</span>
                                    <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;What matters to me #3&quot;</span>
                                <span class="p">},</span>
                                <span class="nt">&quot;archetype_node_id&quot;</span><span class="p">:</span> <span class="s2">&quot;at0004&quot;</span><span class="p">,</span>
                                <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="p">{</span>
                                    <span class="nt">&quot;_type&quot;</span><span class="p">:</span> <span class="s2">&quot;DV_TEXT&quot;</span><span class="p">,</span>
                                    <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;Isolation&quot;</span>
                                <span class="p">}</span>
                            <span class="p">}</span>
                        <span class="p">]</span>
                    <span class="p">}</span>
</code></pre></div>

</div>
<input id="__tabbed_1_3" name="__tabbed_1" type="radio" /><label for="__tabbed_1_3">STRUCTURED JSON</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code>     <span class="s2">&quot;what_matters_to_me&quot;</span><span class="err">:</span> <span class="p">[</span>
          <span class="s2">&quot;Parents&quot;</span><span class="p">,</span>
          <span class="s2">&quot;Mood&quot;</span><span class="p">,</span>
          <span class="s2">&quot;Isolation&quot;</span>
         <span class="p">]</span>
        <span class="err">}</span>
</code></pre></div>

</div>
<input id="__tabbed_1_4" name="__tabbed_1" type="radio" /><label for="__tabbed_1_4">FLAT JSON</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code>    <span class="err">```json</span>
      <span class="p">{</span>
       <span class="nt">&quot;what_matters_to_me:0&quot;</span><span class="p">:</span> <span class="s2">&quot;Parents&quot;</span><span class="p">,</span>
       <span class="nt">&quot;what_matters_to_me:1&quot;</span><span class="p">:</span> <span class="s2">&quot;Mood&quot;</span><span class="p">,</span>
       <span class="nt">&quot;what_matters_to_me:2&quot;</span><span class="p">:</span> <span class="s2">&quot;Isolation&quot;</span>
      <span class="p">}</span>
</code></pre></div>

</div>
</div>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p><code>DV_TEXT</code> can always be sub-classed to <code>DV_CODED_TEXT</code>, so when you see a <strong>text</strong> constraint in an archetype , this can normally always be converted to a <strong>codedText</strong> in a template or at run-time.  As an example, the primary element in the <a href="">Adverse reaction risk</a> archetype is a <code>DV_TEXT</code> but in most circumstances a DV_CODED_TEXT will actually be used.</p>
</div>
<h2>Datatype: <strong>codedText</strong> (<code>DV_CODED_TEXT</code>)</h2>
<p>Is a commonly used datatype in openEHR systems and is a sub-class of <strong>text</strong>. i.e wherever <strong>text</strong> is specified <strong>codedText</strong> can be used instead.</p>
<p>Codes may be 'external' e.g. SNOMED CT, LOINC, ICD-10 or 'local', where they are defined within archetypes, have the form <code>atxxxxx</code> and are commonly referred to as <strong>'atCodes'</strong>.</p>
<p>A <strong>codedText</strong> element always includes the terminologyID, the code itself and the text of the coded concept (Rubric). In the patient data this is a carried in the <code>defining_code</code> attribute of the datatype.</p>
<div class="tabbed-set" data-tabs="2:1"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><label for="__tabbed_2_1">RM Specs</label><div class="tabbed-content"></div>
</div>
<p>The <a href="https://specifications.openehr.org/releases/RM/latest/data_types.html#_text_package">rm.data_types.text package</a> contains classes for representing all textual values in the health record, including plain text, coded terms, and narrative text.
    <img alt="UML - openEHR RM-datatypes.text package" src="https://specifications.openehr.org/releases/UML/latest/diagrams/diagram_Diagrams___18_1_83e026d_1433773264006_931575_5971.svg" /></p>
<div class="tabbed-set" data-tabs="3:3"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><label for="__tabbed_3_1">CANONICAL JSON</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code>   <span class="p">{</span>
        <span class="nt">&quot;_type&quot;</span><span class="p">:</span> <span class="s2">&quot;ELEMENT&quot;</span><span class="p">,</span>
        <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;_type&quot;</span><span class="p">:</span> <span class="s2">&quot;DV_TEXT&quot;</span><span class="p">,</span>
            <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;Status&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;archetype_node_id&quot;</span><span class="p">:</span> <span class="s2">&quot;at0004&quot;</span><span class="p">,</span>
        <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;_type&quot;</span><span class="p">:</span> <span class="s2">&quot;DV_CODED_TEXT&quot;</span><span class="p">,</span>
            <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;Unknown&quot;</span><span class="p">,</span>
            <span class="nt">&quot;defining_code&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;_type&quot;</span><span class="p">:</span> <span class="s2">&quot;CODE_PHRASE&quot;</span><span class="p">,</span>
                <span class="nt">&quot;terminology_id&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;_type&quot;</span><span class="p">:</span> <span class="s2">&quot;TERMINOLOGY_ID&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;local&quot;</span>
                <span class="p">},</span>
                <span class="nt">&quot;code_string&quot;</span><span class="p">:</span> <span class="s2">&quot;at0007&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
</code></pre></div>

</div>
<input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><label for="__tabbed_3_2">STRUCTURED JSON</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code>    <span class="s2">&quot;legal_welfare_proxy_in_place&quot;</span><span class="err">:</span> <span class="p">[</span>
                                    <span class="p">{</span>
                                        <span class="nt">&quot;status&quot;</span><span class="p">:</span> <span class="p">[</span>
                                            <span class="p">{</span>
                                                <span class="nt">&quot;|code&quot;</span><span class="p">:</span> <span class="s2">&quot;at0007&quot;</span><span class="p">,</span>
                                                <span class="nt">&quot;|value&quot;</span><span class="p">:</span> <span class="s2">&quot;Unknown&quot;</span><span class="p">,</span>
                                                <span class="nt">&quot;|terminology&quot;</span><span class="p">:</span> <span class="s2">&quot;local&quot;</span>
                                            <span class="p">}</span>
                                        <span class="p">],</span>
                                    <span class="p">}</span>
    <span class="p">]</span>
</code></pre></div>

</div>
<input id="__tabbed_3_3" name="__tabbed_3" type="radio" /><label for="__tabbed_3_3">FLAT JSON</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code>  <span class="s2">&quot;legal_welfare_proxy_in_place/status|value&quot;</span><span class="err">:</span> <span class="s2">&quot;Unknown&quot;</span><span class="err">,</span>
  <span class="s2">&quot;legal_welfare_proxy_in_place/status|code&quot;</span><span class="err">:</span> <span class="s2">&quot;at0007&quot;</span><span class="err">,</span>
  <span class="s2">&quot;legal_welfare_proxy_in_place/status|terminology&quot;</span><span class="err">:</span> <span class="s2">&quot;local&quot;</span>
</code></pre></div>

</div>
</div>
<h4>Using local 'atCodes'</h4>
<p>e.g <code>local::at0007| normal|</code></p>
<p>When a <strong>codedText</strong> item is added to a FLAT or STRUCTURED JSON format document, you must give the code, value and terminology, unless this is a local 'atCode', in which case only the code needs to be provided, as the terminologyId and text value will be supplied as defaults, based on the known values in the template. </p>
<p>Only the code needs to be specified - the value and terminology are not required since they are pre-defined in the openEHR template..</p>
<div class="tabbed-set" data-tabs="4:1"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><label for="__tabbed_4_1">FLAT JSON</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="err">asthma_diary_entry/examination_findings:</span><span class="mi">0</span><span class="err">/pulmonary_function_testing:</span><span class="mi">0</span><span class="err">/result_details/pulmonary_flow_rate_result/test_result_name|code&#39;:</span> <span class="err">&#39;at</span><span class="mi">0071</span><span class="err">&#39;</span>
</code></pre></div>

</div>
</div>
<h4>Using external terminology</h4>
<p>e.g. <code>SNOMED-CT::23924001| chest tightness |</code></p>
<p>If an external terminology is used, the code, terminology and value must be specified</p>
<div class="tabbed-set" data-tabs="5:1"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><label for="__tabbed_5_1">FLAT JSON</label><div class="tabbed-content">
<p>```json
   'asthma_diary_entry/history:0/story_history/symptom:0/symptom_name|code': '23924001',
   'asthma_diary_entry/history:0/story_history/symptom:0/symptom_name|value': 'chest tightness',
   'asthma_diary_entry/history:0/story_history/symptom:0/symptom_name|terminology': 'SNOMED-CT',</p>
</div>
</div>
<p>```</p>
<h4>Handling multiple codes - Mappings</h4>
<p>Both DV_TEXT and DV_CODED_TEXT allow for other codes to be recorded in the patient record alongside the text value or defining code. THis is done via the <code>mappings</code> attribute in the DV_TEXT/DV_CODED_TEXT datatype.</p>
<div class="tabbed-set" data-tabs="6:4"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio" /><label for="__tabbed_6_1">RM Specs</label><div class="tabbed-content"></div>
<input id="__tabbed_6_2" name="__tabbed_6" type="radio" /><label for="__tabbed_6_2">CANONICAL JSON</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code>
</code></pre></div>

</div>
<input id="__tabbed_6_3" name="__tabbed_6" type="radio" /><label for="__tabbed_6_3">STRUCTURED JSON</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code>
</code></pre></div>

</div>
<input id="__tabbed_6_4" name="__tabbed_6" type="radio" /><label for="__tabbed_6_4">FLAT JSON</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code>
</code></pre></div>

</div>
</div>
<h2>Datatype: <strong>ordinal</strong> <code>DV_ORDINAL</code>and <strong>scale</strong> <code>DV_SCALE</code></h2>
<p>Combines <strong>codedText</strong> with a score, expressed as an integer (DV_ORDINAL) or a real number (DV_SCALE). </p>
<p>DV_SCALE is just being introduced in the latest version of the Reference Model to support the small number of scales and scores that need real numbers. We expect DV_SCALE to be used in preference to DV_ORDINAL for new archetypes. </p>
<div class="codehilite"><pre><span></span><code><span class="mi">0</span><span class="o">:</span> <span class="n">Green</span>  <span class="err">`</span><span class="n">local</span><span class="o">::</span><span class="n">at0022</span><span class="o">::</span><span class="n">Green</span><span class="err">`</span>
<span class="mi">1</span><span class="o">:</span> <span class="n">Amber</span>  <span class="err">`</span><span class="n">local</span><span class="o">::</span><span class="n">at0023</span><span class="o">::</span><span class="n">Amber</span><span class="err">`</span>
<span class="mi">2</span><span class="o">:</span> <span class="n">Red</span>    <span class="err">`</span><span class="n">local</span><span class="o">::</span><span class="n">at0024</span><span class="o">::</span><span class="n">Red</span><span class="err">`</span>

<span class="s1">&#39;community_dental_final_assessment_letter/assessment_scales/dental_rag_score:0/caries_tooth_decay/caries_risk|code&#39;</span><span class="o">:</span> <span class="s1">&#39;at0024&#39;</span><span class="o">,</span>
<span class="s1">&#39;community_dental_final_assessment_letter/assessment_scales/dental_rag_score:0/caries_tooth_decay/caries_risk|ordinal&#39;</span><span class="o">:</span> <span class="mi">2</span><span class="o">,</span>
<span class="s1">&#39;community_dental_final_assessment_letter/assessment_scales/dental_rag_score:0/caries_tooth_decay/caries_risk|value&#39;</span><span class="o">:</span> <span class="s1">&#39;Red&#39;</span><span class="o">,</span>
</code></pre></div>


<h2>Datatype: <em>count</em></h2>
<p><strong><em>count</em></strong> is a simple integer.</p>
<div class="codehilite"><pre><span></span><code><span class="err">&#39;community_dental_final_assessment_letter/investigations_and_results:0/imaging_examination_result:0/result_group/decayed_teeth/decayed_teeth&#39;: 4,</span>
</code></pre></div>


<h2>Datatype: <em>datetime</em></h2>
<p>Records a date or date and time using the <a href="http://www.w3.org/TR/NOTE-datetime">ISO8061
format</a>.</p>
<div class="codehilite"><pre><span></span><code><span class="err">&#39;ctx/time&#39;: &#39;2014-09-23T00:11:02.518+02:00&#39;</span>
</code></pre></div>


<h2>Datatype: <em>quantity</em></h2>
<p>Records a physical quantity along with the appropriate SI units, which
should normally be compliant with <a href="http://unitsofmeasure.org">UCUM</a>.</p>
<div class="codehilite"><pre><span></span><code><span class="err">&quot;asthma_diary_entry/examination_findings:0/pulmonary_function_testing:0/result_details/pulmonary_flow_rate_result/actual_result|magnitude&quot;: 550,</span>
<span class="err">&quot;asthma_diary_entry/examination_findings:0/pulmonary_function_testing:0/result_details/pulmonary_flow_rate_result/actual_result|unit&quot;: &quot;l/min&quot;,</span>
</code></pre></div>


<h1 id="key-openehr-reference-model-attributes">Key openEHR Reference model attributes</h1>
<p>A number of key data points need to be populated in an openEHR
composition, which may not be apparent from the archetypes or templates.
Developers can largely use the example instance documents and APIs for
guidance but these notes may give useful background in addition to
viewing the <a href="http://www.openehr.org/local/releases/1.0.1/uml/index.html">UML view of the openEHR reference
model.</a></p>
<h2><em>committer</em></h2>
<p>This is the name of the person physically committing the document ie.
the person logged on to the account. If omitted from API calls, Ehrscape
will use the domain login name.</p>
<h2><em>composition/composer</em></h2>
<p>This is the clinical author of the document i.e the person with clinical
responsibility. Ehrscape FLAT and STRCTURTED formats handle this as
<code>composer_name</code>.</p>
<h2><em>composition/context/start_time</em></h2>
<p>This is the time that the clinical interaction with the patient began.
Ehrscape FLAT and STRUCTURED formats handle this as ctx/time.</p>
<h2><em>composition/context/health_care_facility</em></h2>
<p>This is the healthcare facility / oragnisation under who’s remit the
encounter took place.</p>
<h2><em>observation/time</em></h2>
<p>This is the time that a patient’s signs and symptoms were observed or a
test was run. It is set automatically by the value of the ctx/time
attribute. If you need to set the time of a specific observation you can
use</p>
<p>The Ehrscape FLAT and STRUCTURED formats hide much of the complexity of
these attributes, providing sensible defaults. In particular the <code>ctx</code>
header common to both JSON STRUCTURED and FLAT formats, considerably
simplifies the composition header …</p>
<div class="codehilite"><pre><span></span><code><span class="err">&#39;ctx/composer_name&#39;: &#39;Rebecca Wassall&#39;,</span>
<span class="err">&#39;ctx/health_care_facility|id&#39;: &#39;999999-345&#39;,</span>
<span class="err">&#39;ctx/health_care_facility|name&#39;: &#39;Northumbria Community NHS&#39;,</span>
<span class="err">&#39;ctx/id_namespace&#39;: &#39;NHS-UK&#39;,</span>
<span class="err">&#39;ctx/id_scheme&#39;: &#39;2.16.840.1.113883.2.1.4.3&#39;,</span>
<span class="err">&#39;ctx/language&#39;: &#39;en&#39;,</span>
<span class="err">&#39;ctx/territory&#39;: &#39;GB&#39;,</span>
<span class="err">&#39;ctx/time&#39;: &#39;2014-09-23T00:11:02.518+02:00&#39;,</span>
</code></pre></div>


<h1 id="handling-specific-openehr-datatypes">Handling specific openEHR datatypes</h1>
<h2><em>text</em></h2>
<p>Text handling is normally straightforward.</p>
<p>FLAT + STRUCTURED</p>
<div class="codehilite"><pre><span></span><code><span class="err">&quot;synopsis&quot;: [</span>
<span class="err"> &quot;Significant dental issues.&quot;</span>
<span class="err"> ]</span>
</code></pre></div>


<h2><em>codedText</em></h2>
<p>For an external terminology, the terminologyId, code and text value must
be supplied but in JSON FLAT and STRUCTURED formats only the local
'atcode' needs to be supplied.</p>
<p>STRUCTURED JSON format</p>
<div class="highlight"><pre><span></span><code> Internal (local) code:
 &quot;dental_swelling&quot;: [
 {
 &quot;|code&quot;: &quot;at0006&quot;,
 }
 ]

 External terminology:
 &quot;symptom_name&quot;: [
 {
 &quot;|code&quot;: &quot;102616008&quot;,
 &quot;|terminology&quot;: &quot;SNOMED-CT&quot;,
 &quot;|value&quot;: &quot;Painful mouth&quot;
 }
 ]
</code></pre></div>

<p>FLAT JSON format</p>
<div class="highlight"><pre><span></span><code> <span class="err">Internal</span> <span class="err">(local)</span> <span class="err">code:</span>
 <span class="s2">&quot;community_dental_final_assessment_letter/examination_findings:0/physical_examination_findings:0/oral_examination/dental_swelling|code&quot;</span><span class="err">:</span> <span class="s2">&quot;at0006&quot;</span>

 <span class="err">External</span> <span class="err">terminology:</span>
 <span class="s2">&quot;community_dental_final_assessment_letter/history:0/story_history:0/symptom:0/symptom_name|value&quot;</span><span class="err">:</span> <span class="s2">&quot;Painful mouth&quot;</span><span class="err">,</span>
 <span class="s2">&quot;community_dental_final_assessment_letter/history:0/story_history:0/symptom:0/symptom_name|code&quot;</span><span class="err">:</span> <span class="s2">&quot;102616008&quot;</span><span class="err">,</span>
 <span class="s2">&quot;community_dental_final_assessment_letter/history:0/story_history:0/symptom:0/symptom_name|terminology&quot;</span><span class="err">:</span> <span class="s2">&quot;SNOMED-CT&quot;</span>
</code></pre></div>

<h2><em>ordinal</em></h2>
<p>For JSON FLAT and STRUCTURED formats only the local 'atcode' needs to be supplied although the ordinal and text value are also
accepted FLAT JSON format</p>
<div class="codehilite"><pre><span></span><code><span class="err">&quot;community_dental_final_assessment_letter/assessment_scales/dental_rag_score:0/caries_tooth_decay/caries_risk|code&quot;: &quot;at0024&quot;</span>
</code></pre></div>


<p>STRUCTURED format</p>
<div class="highlight"><pre><span></span><code> <span class="s2">&quot;caries_risk&quot;</span><span class="err">:</span> <span class="p">[</span>
    <span class="p">{</span>
    <span class="nt">&quot;|code&quot;</span><span class="p">:</span> <span class="s2">&quot;at0024&quot;</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="p">]</span>
</code></pre></div>

<p>or</p>
<div class="highlight"><pre><span></span><code> <span class="s2">&quot;caries_risk&quot;</span><span class="err">:</span> <span class="p">[</span>
 <span class="p">{</span>
    <span class="nt">&quot;|code&quot;</span><span class="p">:</span> <span class="s2">&quot;at0024&quot;</span><span class="p">,</span>
    <span class="nt">&quot;|ordinal&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="nt">&quot;|value&quot;</span><span class="p">:</span> <span class="s2">&quot;Red&quot;</span>
 <span class="p">}</span>
 <span class="p">]</span>
</code></pre></div>

<h2><em>date</em></h2>
<p>Dates need to be persisted in the <a href="http://www.w3.org/TR/NOTE-datetime">ISO8061format</a> and should be displayed in CUI format e.g. 12-Nov-1958</p>
<h1 id="tricky-issues">Tricky issues</h1>
<h2>Converting UI checkboxes to/from codedText</h2>
<p>In a number of places, the UI may best be represented as a set of checkboxes, while the underlying data is modelled as codedText.</p>
<p>e.g. Symptoms</p>
<p>While it may seem more easier and more logical to use a boolean datatype, this is a common pattern in openEHR datasets which are
designed to be interoperable and extensible. Experience has shown that expansion of the target valueset and alignment to external terminologies is easier if an enumerated list of codedText is used rather than boolean.</p>
<p>In the case of 'Symptom' the rule is …</p>
<ul>
<li>
<p>If the checkbox is ticked, populate the Symptom name with the
    SNOMED-CT term</p>
</li>
<li>
<p>If the checkbox is unticked, omit the Symptom name element
    completely.</p>
</li>
</ul>
<p>Conversely when loading a persisted dataset, the checkbox should only be checked if the Symptom name element is present and contains SNOMED-CT term 102616008.</p>
<h2>Multiple occurrence data</h2>
<p>Some aspects of the form e.g Symptoms are handled as multiple
occurrences of the same data point in the underlying dataset.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        <a href="../JPASS12-composition-constraints/" class="md-footer__link md-footer__link--prev" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Understanding composition Constraints and validation
            </div>
          </div>
        </a>
      
      
        <a href="../JPASS14-openehr-rm-attributes/" class="md-footer__link md-footer__link--next" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Key openEHR RM attributes
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}, "search": "../../assets/javascripts/workers/search.4fa0e4ee.min.js", "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.1d3bfcf1.min.js"></script>
      
    
  </body>
</html>